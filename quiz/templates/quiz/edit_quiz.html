{% extends "quiz/layout.html" %}
{% block body %}
    <div class="container">
        <form method="post">
            {% csrf_token %}
            {{ quiz_form.as_p }}
            <button type="submit" name="submit_quiz">Create Quiz</button>
        </form>
        
        <div class="sub-container">
            <ul>
                {% for question in questions %}
                    <li>
                        {% if question.editing %}
                            <form method="post">
                                {% csrf_token %}
                                {{ question_form.as_p }}
                                <button type="submit" name="submit_question" value="{{ question.pk }}">Submit</button>
                            </form>
                            <ul>
                                {% for answer in question.answer_set.all %}
                                    <li>
                                        {% if answer.editing %}
                                            <form method="post">
                                                {% csrf_token %}
                                                {{ answer_form.as_p }}
                                                <button type="submit" name="submit_answer" value="{{ answer.pk }}">Submit</button>
                                            </form>
                                        {% else %}
                                            <h2>{{ answer.choice_text }}</h2>
                                            <h2>{{ answer.correct }}</h2>
                                        {% endif %}
                                    </li>
                                {% endfor %}
                            </ul>
                            <form method="post">
                                {% csrf_token %}
                                <button type="submit" name="new_answer" value="{{ question.pk }}">Add Answer</button>
                            </form>

                        {% else %}
                            <h2>{{ question.question_text }}</h2>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </div>

        <form method="post">
            {% csrf_token %}
            <button type="submit" name="new_question">Add Question</button>
        </form>
    </div>
{% endblock %}